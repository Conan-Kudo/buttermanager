# Maintainer: Eloy Garcia Almaden <eloy.garcia.pca@gmail.com>
pkgname=buttermanager
pkgver=1.0
pkgrel=1
epoch=
pkgdesc="Graphical tool to create BTRFS snapshots, balance filesystems and upgrade the system safety"
arch=('x86_64')
url="https://github.com/egara/buttermanager"
license=('GPL')
groups=()
depends=('btrfs-progs' 'python>=3')
makedepends=('git' 'python-setuptools')
checkdepends=()
optdepends=()
provides=()
conflicts=()
replaces=()
backup=()
options=()
install=
changelog=
source=('git+https://github.com/egara/buttermanager#branch=master')
noextract=()
md5sums=('SKIP')
validpgpkeys=()

build() {
	cd "$pkgname"
        # Dependencies and package installation
	python setup.py install --user
}

package() {
	cd "$pkgname"
        # Destination
  	install -dm755 "$pkgdir/opt/$pkgname"
        # Root python files
	install -Dm644 "$srcdir/$pkgname/$pkgname/*.py" "$pkgdir/opt/$pkgname/"

        # Directories
        install -Dm644 "$srcdir/$pkgname/$pkgname/filesystem" "$pkgdir/opt/$pkgname/filesystem"
        install -Dm644 "$srcdir/$pkgname/$pkgname/images" "$pkgdir/opt/$pkgname/images"
        install -Dm644 "$srcdir/$pkgname/$pkgname/manager" "$pkgdir/opt/$pkgname/manager"
        install -Dm644 "$srcdir/$pkgname/$pkgname/ui" "$pkgdir/opt/$pkgname/ui"
        install -Dm644 "$srcdir/$pkgname/$pkgname/util" "$pkgdir/opt/$pkgname/util"
        install -Dm644 "$srcdir/$pkgname/$pkgname/window" "$pkgdir/opt/$pkgname/window"

  	# .desktop file and icon
  	install -Dm644 "$srcdir/$pkgname/aur/$pkgname.desktop" "$pkgdir/usr/share/applications/$pkgname.desktop"
	install -Dm644 "$srcdir/$pkgname/aur/$pkgname.svg" "$pkgdir/opt/$pkgname/gui/$pkgname.svg"
}
